{"ast":null,"code":"import _objectSpread from\"/home/aradhya/React-App/my-burger-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/aradhya/React-App/my-burger-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/aradhya/React-App/my-burger-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/aradhya/React-App/my-burger-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/aradhya/React-App/my-burger-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import BuildControls from'../../components/Burger/BuildControls/BuildControls';import Aux from'../../hoc/Aux/Aux';import Burger from'../../components/Burger/Burger';import Modal from'../../components/UI/Modal/Modal';import OrderSummary from'../../components/Burger/OrderSummary/OrderSummary';import axios from'../../axios-orders';import Spinner from'../../components/UI/Spinner/Spinner';import withErrorHandler from'../../hoc/withErrorHandler/withErrorHandler';var INGREDIENT_PRICES={salad:25,cheese:35,meat:30,bacon:35};var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);var _super=_createSuper(BurgerBuilder);function BurgerBuilder(){var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={ingredients:null,totalPrice:15,purchasable:false,purchasing:false,loading:false,error:false};_this.purchaseHandler=function(){_this.setState({purchasing:true});};_this.addIngredientHandler=function(type){var oldCount=_this.state.ingredients[type];var updatedCount=oldCount+1;var updatedIngredients=_objectSpread({},_this.state.ingredients);updatedIngredients[type]=updatedCount;var priceAddition=INGREDIENT_PRICES[type];var oldPrice=_this.state.totalPrice;var newPrice=oldPrice+priceAddition;_this.setState({totalPrice:newPrice,ingredients:updatedIngredients});_this.updatePurchaseState(updatedIngredients);};_this.removeIngredientHandler=function(type){var oldCount=_this.state.ingredients[type];if(oldCount<=0){return;}var updatedCount=oldCount-1;var updatedIngredients=_objectSpread({},_this.state.ingredients);updatedIngredients[type]=updatedCount;var priceDeduction=INGREDIENT_PRICES[type];var oldPrice=_this.state.totalPriceordered;var newPrice=oldPrice-priceDeduction;_this.setState({totalPrice:newPrice,ingredients:updatedIngredients});_this.updatePurchaseState(updatedIngredients);};_this.purchaseCancelHandler=function(){_this.setState({purchasing:false});};_this.purchaseContinueHandler=function(){var queryParam=[];for(var i in _this.state.ingredients){queryParam.push(encodeURIComponent(i)+'='+encodeURIComponent(_this.state.ingredients[i]));}queryParam.push('price='+_this.state.totalPrice);var queryString=queryParam.join('&');_this.props.history.push({pathname:'/checkout',search:'?'+queryString});};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props);axios.get('https://react-my-burger-bootcamp.firebaseio.com/ingredients.json').then(function(response){_this2.setState({ingredients:response.data});}).catch(function(error){_this2.setState({error:true});});}},{key:\"updatePurchaseState\",value:function updatePurchaseState(ingredients){var sum=Object.keys(ingredients).map(function(igKey){return ingredients[igKey];}).reduce(function(sum,el){return sum+el;},0);this.setState({purchasable:sum>0});}},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.state.ingredients);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;}var orderSummary=null;var burger=this.state.error?/*#__PURE__*/React.createElement(\"p\",null,\"Ingredient can't be loaded>\"):/*#__PURE__*/React.createElement(\"div\",{style:{alignItems:\"center\"}},/*#__PURE__*/React.createElement(Spinner,null));if(this.state.ingredients){burger=/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Burger,{ingredients:this.state.ingredients}),/*#__PURE__*/React.createElement(BuildControls,{ingredientAdded:this.addIngredientHandler,ingredientRemoved:this.removeIngredientHandler,disabled:disabledInfo,purchasable:this.state.purchasable,ordered:this.purchaseHandler,price:this.state.totalPrice}));orderSummary=/*#__PURE__*/React.createElement(OrderSummary,{ingredients:this.state.ingredients,price:this.state.totalPrice,purchaseCancelled:this.purchaseCancelHandler,purchaseContinued:this.purchaseContinueHandler});}if(this.state.loading){orderSummary=/*#__PURE__*/React.createElement(Spinner,null);}return/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler},orderSummary),burger);}}]);return BurgerBuilder;}(Component);export default withErrorHandler(BurgerBuilder,axios);","map":{"version":3,"sources":["/home/aradhya/React-App/my-burger-app/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","BuildControls","Aux","Burger","Modal","OrderSummary","axios","Spinner","withErrorHandler","INGREDIENT_PRICES","salad","cheese","meat","bacon","BurgerBuilder","state","ingredients","totalPrice","purchasable","purchasing","loading","error","purchaseHandler","setState","addIngredientHandler","type","oldCount","updatedCount","updatedIngredients","priceAddition","oldPrice","newPrice","updatePurchaseState","removeIngredientHandler","priceDeduction","totalPriceordered","purchaseCancelHandler","purchaseContinueHandler","queryParam","i","push","encodeURIComponent","queryString","join","props","history","pathname","search","console","log","get","then","response","data","catch","sum","Object","keys","map","igKey","reduce","el","disabledInfo","key","orderSummary","burger","alignItems"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\nimport Aux from '../../hoc/Aux/Aux';\nimport Burger from '../../components/Burger/Burger';\nimport Modal from '../../components/UI/Modal/Modal'\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\nimport axios from '../../axios-orders'\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\n\n\n\n\nconst INGREDIENT_PRICES = {\n    salad: 25,\n    cheese: 35,\n    meat: 30,\n    bacon: 35\n};\n\nclass BurgerBuilder extends Component{\n    state = {\n        ingredients : null,\n        totalPrice: 15,\n        purchasable:false,\n        purchasing:false,\n        loading:false,\n        error:false\n    }\n\n    componentDidMount(){\n        console.log(this.props);\n        axios.get('https://react-my-burger-bootcamp.firebaseio.com/ingredients.json')\n          .then(response => {\n                this.setState({ingredients:response.data})\n          })\n          .catch(error => {\n              this.setState({error:true});\n          });\n    }\n\n    updatePurchaseState (ingredients) {\n       \n        const sum = Object.keys(ingredients).map(igKey => {\n            return ingredients[igKey];\n        })\n        .reduce((sum,el) => {\n            return sum +el;\n        },0);\n        this.setState({purchasable: sum > 0})\n    }\n\n    purchaseHandler = () => {\n        this.setState({purchasing:true});\n    }\n\n    addIngredientHandler = (type) => {\n        const oldCount= this.state.ingredients[type];\n        const updatedCount = oldCount+1;\n        const updatedIngredients = {\n            ...this.state.ingredients\n        };\n        updatedIngredients[type] = updatedCount;\n        const priceAddition = INGREDIENT_PRICES[type];\n        const oldPrice = this.state.totalPrice;\n        const newPrice = oldPrice + priceAddition;\n        this.setState({totalPrice: newPrice,ingredients: updatedIngredients});\n        this.updatePurchaseState(updatedIngredients);\n    }\n\n    removeIngredientHandler = (type) => {\n        const oldCount= this.state.ingredients[type];\n        if(oldCount <=0){\n            return;\n        }\n        const updatedCount = oldCount-1;\n        const updatedIngredients = {\n            ...this.state.ingredients\n        };\n        updatedIngredients[type] = updatedCount;\n        const priceDeduction = INGREDIENT_PRICES[type];\n        const oldPrice = this.state.totalPriceordered;\n        const newPrice = oldPrice - priceDeduction;\n        this.setState({totalPrice: newPrice,ingredients: updatedIngredients});\n        this.updatePurchaseState(updatedIngredients);\n    }\n\n    purchaseCancelHandler = () => {\n        this.setState({purchasing: false});\n    }\n\n    purchaseContinueHandler = () =>{\n        \n        const queryParam = [];\n        for(let i in this.state.ingredients){\n            queryParam.push(encodeURIComponent(i)+ '=' + encodeURIComponent(this.state.ingredients[i]));\n        }\n        queryParam.push('price='+this.state.totalPrice);\n        const queryString = queryParam.join('&');\n        this.props.history.push({\n            pathname:'/checkout',\n            search:'?'+ queryString });\n    }\n\n\n    render(){\n        const disabledInfo = {\n            ...this.state.ingredients\n        };\n        for(let key in disabledInfo){\n            disabledInfo[key] = disabledInfo[key] <=0;\n        }\n        \n        \n        \n\n        let orderSummary=null;\n        \n        let burger =this.state.error ? <p>Ingredient can't be loaded></p> : <div style={{alignItems:\"center\"}}><Spinner /></div>\n        if(this.state.ingredients){\n            burger =(\n                <Aux>\n                    <Burger ingredients={this.state.ingredients}/>\n                    <BuildControls \n                        ingredientAdded = {this.addIngredientHandler} \n                        ingredientRemoved = {this.removeIngredientHandler} \n                        disabled={disabledInfo} \n                        purchasable={this.state.purchasable}\n                        ordered={this.purchaseHandler}\n                        price={this.state.totalPrice} \n                    />\n                    </Aux>\n            );\n        \n        orderSummary=<OrderSummary \n            ingredients={this.state.ingredients}\n            price={this.state.totalPrice}\n            purchaseCancelled={this.purchaseCancelHandler}\n            purchaseContinued={this.purchaseContinueHandler} />\n        }   \n        if(this.state.loading){\n            orderSummary=<Spinner />    \n        }\n        return (\n            <Aux>\n                <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>\n                    {orderSummary}\n                </Modal>\n                {burger}\n            </Aux>\n        );\n        \n    }\n}\n\n\n\nexport default withErrorHandler(BurgerBuilder,axios);"]},"metadata":{},"sourceType":"module"}